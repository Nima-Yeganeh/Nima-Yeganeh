package main

import (
	"bufio"
	"fmt"
	"os"
	"strconv"
	"strings"
)

const (
	MAX_LUMINANCE   = 28
	MAX_DIFFERENCES = 6
)

var nR, nC int

//
func main() {
	fmt.Scanf("%d%d", &nR, &nC)

	reader := bufio.NewScanner(os.Stdin)

	var matrix [30][60]bool

	for ix_row := 0; reader.Scan(); ix_row++ {
		row := strings.Split(reader.Text(), " ")

		for ix_col, p := range row {
			pixel := strings.Split(p, ",")
			red, _ := strconv.ParseFloat(pixel[0], 32)
			green, _ := strconv.ParseFloat(pixel[1], 32)
			blue, _ := strconv.ParseFloat(pixel[2], 32)

			// 0.2126 R + 0.7152 G + 0.0722 B
			luminance := red*0.2126 + green*0.7152 + blue*0.0722

			if luminance < MAX_LUMINANCE { // if red < 3 && green < 3 && blue < 3 {
				matrix[ix_row][ix_col] = true
			} else {
				matrix[ix_row][ix_col] = false
			}
		}
	}

	lmap := lettersMap()
	ix := 0
	for col := 5; ix < 5; col += 9 {
		current_letter_matrix := extractLetter(&matrix, col)

		for key, val := range lmap {
			if compareMatrices(&val, current_letter_matrix) {
				fmt.Print(key)
				break
			}
		}
		ix++ // !!
	}
}

//
func extractLetter(matrix *[30][60]bool, left_top_col int) *[10][8]bool {
	var letter_matrix [10][8]bool
	i := 0

	for ix_row := 11; i < 10; ix_row++ {
		ix_col := left_top_col

		for k := 0; k < 8; ix_col++ {
			letter_matrix[i][k] = matrix[ix_row][ix_col]
			k++ // k !!
		}

		i++ // i !!
	}

	return &letter_matrix
}

//
func compareMatrices(mtxA *[10][8]bool, mtxB *[10][8]bool) bool {
	diffs_count := 0

	for i := 0; i < 10; i++ {
		for k := 0; k < 8; k++ {
			if mtxA[i][k] != mtxB[i][k] {
				diffs_count++
				if diffs_count >= MAX_DIFFERENCES {
					return false
				}
			}
		}
	}
	return diffs_count < MAX_DIFFERENCES // should be just true, explicit is better than implicit
}

func lettersMap() map[string][10][8]bool {
	return map[string][10][8]bool{"A": [10][8]bool{[8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, true, true, true, true, false, false}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, true, true, true, true, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}}, "M": [10][8]bool{[8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, true, false, false, true, true, true}, [8]bool{false, true, true, true, true, true, true, true}, [8]bool{true, true, false, true, true, false, true, true}, [8]bool{true, true, false, true, true, false, true, true}, [8]bool{true, true, false, true, true, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}}, "K": [10][8]bool{[8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, true, false, false}, [8]bool{true, true, false, false, true, true, false, false}, [8]bool{true, true, false, true, true, false, false, false}, [8]bool{true, true, true, true, false, false, false, false}, [8]bool{true, true, true, true, false, false, false, false}, [8]bool{true, true, false, true, true, false, false, false}, [8]bool{true, true, false, false, true, false, false, false}, [8]bool{true, true, false, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}}, "7": [10][8]bool{[8]bool{true, true, false, true, true, true, true, true}, [8]bool{false, false, false, false, false, false, true, true}, [8]bool{false, false, false, false, false, false, true, true}, [8]bool{false, false, false, false, false, true, true, false}, [8]bool{false, false, false, false, true, true, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, true, true, false, false, false, false}, [8]bool{false, false, true, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}}, "X": [10][8]bool{[8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{false, false, true, true, true, true, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, true, true, true, true, false, false}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}}, "Z": [10][8]bool{[8]bool{true, true, true, true, true, true, true, false}, [8]bool{false, false, false, false, false, true, false, false}, [8]bool{false, false, false, false, false, true, true, false}, [8]bool{false, false, false, false, true, true, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, true, true, false, false, false, false}, [8]bool{false, true, true, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, true, true, true, true, true, false}}, "F": [10][8]bool{[8]bool{true, true, true, true, true, true, true, true}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, true, true, true, true, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}}, "6": [10][8]bool{[8]bool{false, false, true, true, true, true, false, false}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, true, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, true, true, true, false, false}, [8]bool{true, true, true, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, false, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{false, false, true, true, true, true, false, false}}, "Q": [10][8]bool{[8]bool{false, false, true, true, true, true, false, false}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, true, true, false, true, true}, [8]bool{true, true, false, false, true, true, true, true}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{false, false, true, true, true, true, false, true}}, "C": [10][8]bool{[8]bool{false, false, true, true, true, true, true, false}, [8]bool{false, true, true, false, false, false, true, true}, [8]bool{false, true, false, false, false, false, false, true}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, true}, [8]bool{false, true, true, false, false, false, true, true}, [8]bool{false, false, true, true, true, true, true, false}}, "4": [10][8]bool{[8]bool{false, false, false, false, false, true, true, false}, [8]bool{false, false, false, false, true, true, true, false}, [8]bool{false, false, false, true, true, true, true, false}, [8]bool{false, false, true, true, false, true, true, false}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{true, true, false, false, false, true, true, false}, [8]bool{true, true, true, true, true, true, false, true}, [8]bool{false, false, false, false, false, true, true, false}, [8]bool{false, false, false, false, false, true, true, false}, [8]bool{false, false, false, false, false, true, true, false}}, "D": [10][8]bool{[8]bool{true, true, true, true, true, true, false, false}, [8]bool{true, true, false, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, false, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, true, true, false}, [8]bool{true, true, true, true, true, true, false, false}}, "0": [10][8]bool{[8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, true, true, true, true, false, false}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, false, false, false, false, false, true, true}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{false, false, true, true, true, true, false, false}, [8]bool{false, false, false, true, true, false, false, false}}, "R": [10][8]bool{[8]bool{true, true, true, true, true, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, false, true}, [8]bool{true, true, true, true, true, true, true, false}, [8]bool{true, true, true, true, true, false, false, false}, [8]bool{true, true, false, false, true, true, false, false}, [8]bool{true, true, false, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}}, "8": [10][8]bool{[8]bool{false, false, true, true, false, true, false, false}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{false, false, true, true, true, true, false, false}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, false, true}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{false, false, false, true, true, true, false, false}}, "P": [10][8]bool{[8]bool{true, true, true, true, true, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, true, true, true, true, true, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}}, "I": [10][8]bool{[8]bool{false, true, true, true, true, true, true, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, true, true, true, true, true, true, false}}, "J": [10][8]bool{[8]bool{false, false, false, true, true, true, true, false}, [8]bool{false, false, false, false, false, true, true, false}, [8]bool{false, false, false, false, false, true, true, false}, [8]bool{false, false, false, false, false, true, true, false}, [8]bool{false, false, false, false, false, true, true, false}, [8]bool{false, false, false, false, false, true, true, false}, [8]bool{false, false, false, false, false, true, true, false}, [8]bool{false, true, false, false, false, true, true, false}, [8]bool{false, true, true, false, true, true, false, false}, [8]bool{false, false, true, true, true, false, false, false}}, "H": [10][8]bool{[8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, true, true, true, true, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}}, "W": [10][8]bool{[8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, true, true, false, true, true}, [8]bool{true, true, false, true, true, false, true, true}, [8]bool{true, true, false, true, true, false, true, true}, [8]bool{true, true, true, true, true, true, true, true}, [8]bool{true, true, true, false, false, true, true, true}, [8]bool{true, true, false, false, false, false, true, true}}, "G": [10][8]bool{[8]bool{false, false, true, true, true, true, true, false}, [8]bool{false, true, true, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{false, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, true, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{false, true, true, false, false, false, true, true}, [8]bool{false, false, true, true, true, true, true, false}}, "Y": [10][8]bool{[8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{false, false, true, true, true, true, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}}, "3": [10][8]bool{[8]bool{false, true, true, true, true, true, false, false}, [8]bool{false, true, false, false, false, true, true, false}, [8]bool{false, false, false, false, false, false, true, true}, [8]bool{false, false, false, false, false, true, true, false}, [8]bool{false, false, false, true, true, true, false, false}, [8]bool{false, false, false, false, false, true, true, false}, [8]bool{false, false, false, false, false, false, true, true}, [8]bool{false, false, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, true, true, false}, [8]bool{false, true, true, true, true, true, false, false}}, "B": [10][8]bool{[8]bool{true, true, true, true, true, true, false, false}, [8]bool{true, true, false, false, false, true, true, false}, [8]bool{true, false, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, true, true, false}, [8]bool{true, true, true, true, true, true, false, false}, [8]bool{true, true, false, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, true, true, false}, [8]bool{true, true, true, true, true, true, false, false}}, "S": [10][8]bool{[8]bool{false, true, true, true, true, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{false, true, true, true, true, true, true, false}, [8]bool{false, false, false, false, false, false, true, true}, [8]bool{false, false, false, false, false, false, true, true}, [8]bool{false, false, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{false, true, true, true, true, true, true, false}}, "U": [10][8]bool{[8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{false, false, true, true, true, true, false, false}}, "E": [10][8]bool{[8]bool{true, true, true, true, true, true, true, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, true, true, true, true, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, false, false, false, false, false, false, false}, [8]bool{true, true, true, true, true, true, true, false}}, "5": [10][8]bool{[8]bool{true, true, true, true, true, true, true, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, true, true, true, false, false}, [8]bool{true, true, true, false, false, true, true, false}, [8]bool{false, false, false, false, false, false, true, true}, [8]bool{false, false, false, false, false, false, true, true}, [8]bool{false, true, false, false, false, false, true, true}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{false, false, true, true, true, true, false, false}}, "2": [10][8]bool{[8]bool{false, false, false, true, true, true, false, false}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{false, false, false, false, false, false, true, true}, [8]bool{false, false, false, false, false, true, true, false}, [8]bool{false, false, false, false, false, true, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, true, true, false, false, false, false}, [8]bool{false, true, true, false, false, false, false, false}, [8]bool{true, true, true, true, true, true, true, true}}, "O": [10][8]bool{[8]bool{false, false, true, true, true, true, false, false}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{false, false, true, true, true, true, false, false}}, "T": [10][8]bool{[8]bool{true, true, true, true, true, true, true, true}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}}, "9": [10][8]bool{[8]bool{false, false, true, true, true, true, false, false}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{false, true, true, false, false, true, true, true}, [8]bool{false, false, true, true, true, false, true, true}, [8]bool{false, false, false, false, false, false, true, true}, [8]bool{false, true, false, false, false, false, true, true}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{false, false, true, true, true, true, false, false}}, "V": [10][8]bool{[8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, false, false, false, false, true, true}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{false, true, true, false, false, true, true, false}, [8]bool{false, false, true, true, true, true, false, false}, [8]bool{false, false, true, true, true, true, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}}, "1": [10][8]bool{[8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, true, true, true, false, false, false}, [8]bool{false, true, true, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, false, false, true, true, false, false, false}, [8]bool{false, true, true, true, true, true, true, false}}, "N": [10][8]bool{[8]bool{true, true, false, false, false, false, true, true}, [8]bool{true, true, true, false, false, false, true, true}, [8]bool{true, true, true, true, false, false, true, true}, [8]bool{true, true, true, true, false, false, true, true}, [8]bool{true, true, false, true, true, false, true, true}, [8]bool{true, true, false, true, true, false, true, true}, [8]bool{true, true, false, false, true, true, true, true}, [8]bool{true, true, false, false, false, true, true, true}, [8]bool{true, true, false, false, false, true, true, true}, [8]bool{true, true, false, false, false, false, false, true}}, "L": [10][8]bool{[8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, false, false, false, false, false, false}, [8]bool{true, true, true, true, true, true, true, false}}}
}
